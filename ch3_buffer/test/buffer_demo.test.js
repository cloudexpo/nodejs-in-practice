var buf = require('../index');
var path = require('path');
var describe = require('mocha').describe;
var should = require('should');
var test_file_small = path.join(__dirname, 'data/small.txt');
var test_file_large = path.join(__dirname, 'data/large.txt');
var test_img = path.join(__dirname, 'data/test_img.png');
var test_img_uri='data:image/png;base64,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';
//describle -> test suite
//it -> test case, the smallest test unit

describe('buffer_demo_test', function() {
    var buf_1 = buf.buffer_demo.createBuffer(255);


    it('buffer should be instance of buffer', function() {
        buf_1.should.be.instanceof(Buffer);
    });
    it('buffer should not be instance of array', function() {
        buf_1.should.not.be.instanceof(Array);
    });
    it('buffer size should be 255', function() {
        buf_1.length.should.equal(255);
    });

    it('file async read should return buffer', function(done) {
        buf.buffer_demo.readFileAsBuffer(test_file_small, function(buf) {
            buf.should.be.instanceof(Buffer);
            done();
        });

    });
    it('file content should be hello world', function(done) {
        buf.buffer_demo.readFileAsBuffer(test_file_small, function(buf) {
            buf.toString().should.eql('hello world');
            done();
        });

    });

    it('large file content should not be hello world', function(done) {
        buf.buffer_demo.readFileAsBuffer(test_file_large, function(buf) {
            buf.toString().should.not.eql('hello world');
            done();
        });

    });

    it('Img URL should be encoded correctly', function() {
        var uri = buf.buffer_demo.encodeBase64(test_img) 
        uri.should.eql(test_img_uri);
    });

});


describe('pending_test_demo', function() {
    it('This test case is pending/not implemented#doesn\'t work :(', function() {

    })
});

